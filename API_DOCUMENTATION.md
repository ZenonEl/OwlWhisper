# ü¶â Owl Whisper API Documentation

## **üìö –û–±–∑–æ—Ä**

Owl Whisper –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º** —á–µ—Ä–µ–∑ Go shared library (`.so`, `.dll`, `.dylib`). –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ ctypes/FFI.

---

## **üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∫–æ–º–ø–∏–ª—è—Ü–∏—è**

### **1. –ö–æ–º–ø–∏–ª—è—Ü–∏—è Go –≤ shared library:**

```bash
# Linux
go build -buildmode=c-shared -o dist/libowlwhisper.so ./cmd/owlwhisper

# Windows
go build -buildmode=c-shared -o dist/owlwhisper.dll ./cmd/owlwhisper

# macOS
go build -buildmode=c-shared -o dist/libowlwhisper.dylib ./cmd/owlwhisper
```

### **2. Python –ø—Ä–∏–º–µ—Ä:**
```python
import ctypes
owlwhisper = ctypes.CDLL("./dist/libowlwhisper.so")
```

---

## **üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**

### **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**

#### `StartOwlWhisper()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç Owl Whisper
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` (0 = —É—Å–ø–µ—Ö, -1 = –æ—à–∏–±–∫–∞)
- **–ü—Ä–∏–º–µ—Ä:** `result = owlwhisper.StartOwlWhisper()`

#### `StopOwlWhisper()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Owl Whisper
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` (0 = —É—Å–ø–µ—Ö, -1 = –æ—à–∏–±–∫–∞)
- **–ü—Ä–∏–º–µ—Ä:** `result = owlwhisper.StopOwlWhisper()`

---

### **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**

#### `SendMessage(text)`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –ø–∏—Ä–∞–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `char* text` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` (0 = —É—Å–ø–µ—Ö, -1 = –æ—à–∏–±–∫–∞)
- **–ü—Ä–∏–º–µ—Ä:** `result = owlwhisper.SendMessage("–ü—Ä–∏–≤–µ—Ç!")`

#### `SendMessageToPeer(peerID, text)`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–∏—Ä—É
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** 
  - `char* peerID` - ID –ø–∏—Ä–∞
  - `char* text` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` (0 = —É—Å–ø–µ—Ö, -1 = –æ—à–∏–±–∫–∞)
- **–ü—Ä–∏–º–µ—Ä:** `result = owlwhisper.SendMessageToPeer("peer123", "–ü—Ä–∏–≤–µ—Ç!")`

---

### **–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**

#### `GetMyPeerID()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞—à Peer ID
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `char*` - —Å—Ç—Ä–æ–∫–∞ —Å Peer ID
- **–ü—Ä–∏–º–µ—Ä:** `peer_id = owlwhisper.GetMyPeerID()`
- **–í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString(peer_id)` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

#### `GetPeers()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `char*` - JSON –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫
- **–ü—Ä–∏–º–µ—Ä:** `peers = owlwhisper.GetPeers()`
- **–í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString(peers)` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

#### `GetConnectionStatus()`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `char*` - JSON –æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- **–ü—Ä–∏–º–µ—Ä:** `status = owlwhisper.GetConnectionStatus()`
- **–í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString(status)` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

---

### **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞**

#### `GetChatHistory(peerID)`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ —Å –ø–∏—Ä–æ–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `char* peerID` - ID –ø–∏—Ä–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `char*` - JSON –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ü—Ä–∏–º–µ—Ä:** `history = owlwhisper.GetChatHistory("peer123")`
- **–í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString(history)` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

#### `GetChatHistoryLimit(peerID, limit)`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ —Å –ø–∏—Ä–æ–º
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** 
  - `char* peerID` - ID –ø–∏—Ä–∞
  - `int limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `char*` - JSON –º–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–ü—Ä–∏–º–µ—Ä:** `history = owlwhisper.GetChatHistoryLimit("peer123", 50)`
- **–í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString(history)` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!

---

### **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø–∏—Ä–∞–º**

#### `ConnectToPeer(peerID)`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø–∏—Ä—É –ø–æ ID
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `char* peerID` - ID –ø–∏—Ä–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `int` (0 = —É—Å–ø–µ—Ö, -1 = –æ—à–∏–±–∫–∞)
- **–ü—Ä–∏–º–µ—Ä:** `result = owlwhisper.ConnectToPeer("peer123")`

---

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**

#### `FreeString(str)`
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å, –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –¥–ª—è —Å—Ç—Ä–æ–∫
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `char* str` - —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `void`
- **–ü—Ä–∏–º–µ—Ä:** `owlwhisper.FreeString(peer_id)`
- **–í–∞–∂–Ω–æ:** **–í–°–ï–ì–î–ê** –≤—ã–∑—ã–≤–∞–π—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Å—Ç—Ä–æ–∫, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π!

---

## **üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### **Python (ctypes)**
```python
import ctypes
import json

# –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É
owlwhisper = ctypes.CDLL("./dist/libowlwhisper.so")

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ç–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
owlwhisper.GetMyPeerID.restype = ctypes.c_char_p
owlwhisper.GetPeers.restype = ctypes.c_char_p
owlwhisper.GetConnectionStatus.restype = ctypes.c_char_p
owlwhisper.GetChatHistory.restype = ctypes.c_char_p

# –ó–∞–ø—É—Å–∫–∞–µ–º
owlwhisper.StartOwlWhisper()

# –ü–æ–ª—É—á–∞–µ–º Peer ID
peer_id = owlwhisper.GetMyPeerID()
print(f"–ú–æ–π ID: {peer_id.decode('utf-8')}")
owlwhisper.FreeString(peer_id)

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
owlwhisper.SendMessage("–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!")

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
owlwhisper.StopOwlWhisper()
```

### **JavaScript/Node.js (ffi-napi)**
```javascript
const ffi = require('ffi-napi');

const owlwhisper = ffi.Library('./dist/libowlwhisper.so', {
  'StartOwlWhisper': ['int', []],
  'SendMessage': ['int', ['string']],
  'GetMyPeerID': ['string', []],
  'StopOwlWhisper': ['int', []]
});

owlwhisper.StartOwlWhisper();
const peerId = owlwhisper.GetMyPeerID();
console.log(`–ú–æ–π ID: ${peerId}`);
owlwhisper.StopOwlWhisper();
```

---

## **‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è**

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é:** –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ `FreeString()` –¥–ª—è —Å—Ç—Ä–æ–∫, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π
2. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** –°—Ç—Ä–æ–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ UTF-8
3. **–û—à–∏–±–∫–∏:** –§—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, -1 –ø—Ä–∏ –æ—à–∏–±–∫–µ
4. **JSON:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π

---

## **üîç –û—Ç–ª–∞–¥–∫–∞**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
```python
try:
    owlwhisper = ctypes.CDLL("./dist/libowlwhisper.so")
    print("‚úÖ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞")
except Exception as e:
    print(f"‚ùå –û—à–∏–±–∫–∞: {e}")
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π:**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if hasattr(owlwhisper, 'StartOwlWhisper'):
    print("‚úÖ –§—É–Ω–∫—Ü–∏—è StartOwlWhisper –Ω–∞–π–¥–µ–Ω–∞")
else:
    print("‚ùå –§—É–Ω–∫—Ü–∏—è StartOwlWhisper –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
```

---

## **üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤**

```
dist/
‚îú‚îÄ‚îÄ libowlwhisper.so      # Linux shared library
‚îú‚îÄ‚îÄ owlwhisper.dll        # Windows shared library  
‚îú‚îÄ‚îÄ libowlwhisper.dylib   # macOS shared library
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—É

examples/
‚îî‚îÄ‚îÄ python_client.py      # –ü—Ä–∏–º–µ—Ä Python –∫–ª–∏–µ–Ω—Ç–∞
```