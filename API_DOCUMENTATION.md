# ü¶â Owl Whisper API Documentation

## üìã –û–±–∑–æ—Ä

**Owl Whisper** - —ç—Ç–æ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π P2P –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Go shared library (`.so`, `.dll`, `.dylib`) –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ª—é–±—ã–º–∏ —è–∑—ã–∫–∞–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ FFI/ctypes.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∏—Ä–æ–≤** —á–µ—Ä–µ–∑ mDNS (–ª–æ–∫–∞–ª—å–Ω–æ) –∏ DHT (–≥–ª–æ–±–∞–ª—å–Ω–æ)
- ‚úÖ **NAT traversal** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º hole punching
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤** (TCP, QUIC, WebRTC)
- ‚úÖ **–ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π** –±–µ–∑ HTTP/WebSocket
- ‚úÖ **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ PeerID** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–ª—é—á–µ–π
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –Ω–∏–∫–Ω–µ–π–º–æ–≤** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–±–º–µ–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª—è–º–∏
- ‚úÖ **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è 1-–Ω–∞-1** —Å –∞–¥—Ä–µ—Å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–æ–π


---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
import ctypes
import os

# –ü—É—Ç—å –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
lib_path = "./dist/libowlwhisper.so"  # Linux
# lib_path = "./dist/owlwhisper.dll"   # Windows  
# lib_path = "./dist/libowlwhisper.dylib"  # macOS

# –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É
owlwhisper = ctypes.CDLL(lib_path)
```

### 2. –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
# –ó–∞–ø—É—Å–∫
result = owlwhisper.StartOwlWhisper()
if result == 0:
    print("‚úÖ Owl Whisper –∑–∞–ø—É—â–µ–Ω")
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ Peer ID
    peer_id = owlwhisper.GetMyPeerID()
    print(f"üë§ –ú–æ–π Peer ID: {ctypes.string_at(peer_id).decode()}")
    owlwhisper.FreeString(peer_id)
    
    # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
    message = "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!".encode('utf-8')
    result = owlwhisper.SendMessage(message)
    
    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
    owlwhisper.StopOwlWhisper()
```

### 2.5. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è

```python
import base64
import json

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –ø–∞—Ä—É –∫–ª—é—á–µ–π (JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π)
key_data = owlwhisper.GenerateNewKeyPair()
if key_data:
    # –î–µ–∫–æ–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
    json_str = ctypes.string_at(key_data).decode()
    key_info = json.loads(json_str)
    
    print(f"üîë –ù–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–Ω:")
    print(f"   Peer ID: {key_info['peer_id']}")
    print(f"   –¢–∏–ø –∫–ª—é—á–∞: {key_info['key_type']}")
    
    # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–æ–Ω —É–∂–µ –≤ base64)
    private_key = base64.b64decode(key_info['private_key'])
    
    # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(key_data)
    
    # –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á
    # –∏–ª–∏ —Å—Ä–∞–∑—É –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å –Ω–∏–º
    result = owlwhisper.StartOwlWhisperWithKey(private_key, len(private_key))
else:
    print("‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π")
```

### 2.6. –ü—Ä—è–º–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)

```python
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å—ã—Ä—ã–µ –±–∞–π—Ç—ã –∫–ª—é—á–∞ –Ω–∞–ø—Ä—è–º—É—é
key_bytes = owlwhisper.GenerateNewKeyBytes()
if key_bytes:
    # –ü–æ–ª—É—á–∞–µ–º —Å—ã—Ä—ã–µ –±–∞–π—Ç—ã –∫–ª—é—á–∞
    raw_key = ctypes.string_at(key_bytes)
    
    print(f"üîë –°—ã—Ä—ã–µ –±–∞–π—Ç—ã –∫–ª—é—á–∞: {len(raw_key)} –±–∞–π—Ç")
    
    # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(key_bytes)
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º —Å —Å—ã—Ä—ã–º–∏ –±–∞–π—Ç–∞–º–∏
    result = owlwhisper.StartOwlWhisperWithKey(raw_key, len(raw_key))
else:
    print("‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞")
```

### 3. –ú—É–ª—å—Ç–∏-–ø—Ä–æ—Ñ–∏–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

```python
import ctypes
import os
import base64
import json

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
owlwhisper.StartOwlWhisperWithKey.argtypes = [ctypes.c_char_p, ctypes.c_int]
owlwhisper.StartOwlWhisperWithKey.restype = ctypes.c_int
owlwhisper.GenerateNewKeyPair.restype = ctypes.c_char_p

# –í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
def create_new_profile(nickname):
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –ø–∞—Ä—É –∫–ª—é—á–µ–π
    key_data = owlwhisper.GenerateNewKeyPair()
    if not key_data:
        print("‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π")
        return None
    
    # –î–µ–∫–æ–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∫–ª—é—á–∞
    json_str = ctypes.string_at(key_data).decode()
    key_info = json.loads(json_str)
    
    print(f"‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å:")
    print(f"   Peer ID: {key_info['peer_id']}")
    print(f"   –ù–∏–∫–Ω–µ–π–º: {nickname}")
    
    # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
    private_key = base64.b64decode(key_info['private_key'])
    
    # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(key_data)
    
    # –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á
    return private_key, key_info['peer_id']

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
def load_existing_profile(profile_path):
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
    with open(os.path.expanduser(profile_path), "rb") as f:
        encrypted_key = f.read()

    # –†–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ–º –∫–ª—é—á (—ç—Ç–æ –¥–µ–ª–∞–µ—Ç Python –∫–ª–∏–µ–Ω—Ç)
    decrypted_key = decrypt_key(encrypted_key, user_password)

    # –ó–∞–ø—É—Å–∫–∞–µ–º —Å –ø—Ä–æ—Ñ–∏–ª–µ–º
    result = owlwhisper.StartOwlWhisperWithKey(decrypted_key, len(decrypted_key))
    if result == 0:
        print("‚úÖ Owl Whisper –∑–∞–ø—É—â–µ–Ω —Å –ø—Ä–æ—Ñ–∏–ª–µ–º")
        
        # –†–∞–±–æ—Ç–∞–µ–º —Å –ø—Ä–æ—Ñ–∏–ª–µ–º...
        profile = owlwhisper.GetMyProfile()
        print(f"–ü—Ä–æ—Ñ–∏–ª—å: {ctypes.string_at(profile).decode()}")
        owlwhisper.FreeString(profile)
        
        return True
    else:
        print("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è")
        return False

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if __name__ == "__main__":
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å
    new_key, new_peer_id = create_new_profile("–†–∞–±–æ—á–∏–π")
    if new_key:
        # –ó–∞–ø—É—Å–∫–∞–µ–º —Å –Ω–æ–≤—ã–º –∫–ª—é—á–æ–º
        result = owlwhisper.StartOwlWhisperWithKey(new_key, len(new_key))
        if result == 0:
            print("‚úÖ –ù–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∑–∞–ø—É—â–µ–Ω!")
            
            # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
            owlwhisper.StopOwlWhisper()
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º—É–ª—å—Ç–∏-–ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**Owl Whisper Core** –æ—Å—Ç–∞–µ—Ç—Å—è **"–±–µ—Å–ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–º" (profile-agnostic)** –∏ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–ª—é—á –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - Core —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ P2P —Å–µ—Ç–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–ª—é—á–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Core
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –∫–ª–∏–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è Core

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

| –ó–∞–¥–∞—á–∞ | –ö—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç? | –î–µ—Ç–∞–ª–∏ |
|--------|---------------|---------|
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π** | **Core (Go)** | `GenerateNewKeyPair()` —Å–æ–∑–¥–∞–µ—Ç Ed25519 –∫–ª—é—á–∏ –≤ libp2p —Ñ–æ—Ä–º–∞—Ç–µ |
| **–•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π** | **–ö–ª–∏–µ–Ω—Ç (Python/Flet)** | –£–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏ `~/.config/owlwhisper/profiles/<uuid>/` |
| **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π** | **–ö–ª–∏–µ–Ω—Ç (Python/Flet)** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `cryptography` –¥–ª—è AES-256-GCM + Argon2 |
| **–ó–∞–ø—Ä–æ—Å –ø–∞—Ä–æ–ª–µ–π** | **–ö–ª–∏–µ–Ω—Ç (Python/Flet)** | UI —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ |
| **–ó–∞–ø—É—Å–∫ P2P —É–∑–ª–∞** | **Core (Go)** | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `[]byte` –∫–ª—é—á–∞ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç |
| **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** | **–ö–ª–∏–µ–Ω—Ç (Python/Flet)** | –£–ø—Ä–∞–≤–ª—è–µ—Ç `profile.db` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è

```
~/.config/owlwhisper/
‚îú‚îÄ‚îÄ profiles.json                    # –ú–∞—Å—Ç–µ—Ä-—Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º –ø—Ä–æ—Ñ–∏–ª–µ–π
‚îî‚îÄ‚îÄ profiles/
    ‚îú‚îÄ‚îÄ <profile_uuid_1>/           # –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ñ–∏–ª—å
    ‚îÇ   ‚îú‚îÄ‚îÄ identity.key.encrypted  # –ó–ê–®–ò–§–†–û–í–ê–ù–ù–´–ô –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
    ‚îÇ   ‚îú‚îÄ‚îÄ profile.db              # SQLite –±–∞–∑–∞ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
    ‚îÇ   ‚îî‚îÄ‚îÄ settings.json           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ UI
    ‚îÇ
    ‚îî‚îÄ‚îÄ <profile_uuid_2>/           # –õ–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
        ‚îú‚îÄ‚îÄ identity.key.encrypted
        ‚îú‚îÄ‚îÄ profile.db
        ‚îî‚îÄ‚îÄ settings.json
```

### üîë –§–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π

**–í–∞–∂–Ω–æ:** Go –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–∂–∏–¥–∞–µ—Ç –∫–ª—é—á–∏ –≤ **libp2p —Ñ–æ—Ä–º–∞—Ç–µ**, –∞ –Ω–µ –≤ Protobuf –∏–ª–∏ —Å—ã—Ä—ã—Ö –±–∞–π—Ç–∞—Ö!

- **‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:** 
  - `GenerateNewKeyPair()` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª—é—á–µ
  - `GenerateNewKeyBytes()` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—ã—Ä—ã—Ö –±–∞–π—Ç–æ–≤ –∫–ª—é—á–∞
- **‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** `secrets.token_bytes(32)` –∏–ª–∏ Protobuf —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
- **üîß –§–æ—Ä–º–∞—Ç:** Ed25519 –∫–ª—é—á–∏, —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `crypto.MarshalPrivateKey()`
- **üìè –†–∞–∑–º–µ—Ä:** –û–±—ã—á–Ω–æ 68 –±–∞–π—Ç –¥–ª—è Ed25519 –∫–ª—é—á–µ–π
- **üÜî PeerID:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞

### üîÑ –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–ª—é—á–∞–º–∏

#### –°–ø–æ—Å–æ–± 1: JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è UI)
```python
# –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–ª—é—á–µ
key_data = owlwhisper.GenerateNewKeyPair()
json_str = ctypes.string_at(key_data).decode()
key_info = json.loads(json_str)

# –ö–ª—é—á —É–∂–µ –≤ base64, –¥–µ–∫–æ–¥–∏—Ä—É–µ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
private_key = base64.b64decode(key_info['private_key'])
result = owlwhisper.StartOwlWhisperWithKey(private_key, len(private_key))

owlwhisper.FreeString(key_data)
```

#### –°–ø–æ—Å–æ–± 2: –°—ã—Ä—ã–µ –±–∞–π—Ç—ã (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)
```python
# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –±–∞–π—Ç—ã –∫–ª—é—á–∞
key_bytes = owlwhisper.GenerateNewKeyBytes()
raw_key = ctypes.string_at(key_bytes)

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–ø—Ä—è–º—É—é
result = owlwhisper.StartOwlWhisperWithKey(raw_key, len(raw_key))

owlwhisper.FreeString(key_bytes)
```

---

## üìö API Reference

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### `StartOwlWhisper() -> int`
–ó–∞–ø—É—Å–∫–∞–µ—Ç Owl Whisper core —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –∫–ª—é—á–æ–º (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏).
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `0` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, `1` –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **–ü—Ä–∏–º–µ—Ä:**
```python
result = owlwhisper.StartOwlWhisper()
if result == 0:
    print("‚úÖ –ó–∞–ø—É—â–µ–Ω")
else:
    print("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞")
```

#### `StartOwlWhisperWithKey(keyBytes: bytes, keyLength: int) -> int`
–ó–∞–ø—É—Å–∫–∞–µ—Ç Owl Whisper core —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º (–¥–ª—è –º—É–ª—å—Ç–∏-–ø—Ä–æ—Ñ–∏–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º).
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `keyBytes` - –±–∞–π—Ç—ã –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
  - `keyLength` - –¥–ª–∏–Ω–∞ –∫–ª—é—á–∞ –≤ –±–∞–π—Ç–∞—Ö
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `0` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, `1` –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **–ü—Ä–∏–º–µ—Ä:**
```python
# –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
with open("profile/identity.key.encrypted", "rb") as f:
    key_data = f.read()
    
# –†–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ–º –∫–ª—é—á (—ç—Ç–æ –¥–µ–ª–∞–µ—Ç Python –∫–ª–∏–µ–Ω—Ç)
decrypted_key = decrypt_key(key_data, user_password)

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º
result = owlwhisper.StartOwlWhisperWithKey(decrypted_key, len(decrypted_key))
if result == 0:
    print("‚úÖ Owl Whisper –∑–∞–ø—É—â–µ–Ω —Å –ø—Ä–æ—Ñ–∏–ª–µ–º")
else:
    print("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞")
```

#### `StopOwlWhisper() -> int`
–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Owl Whisper core.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `0` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, `-1` –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **–ü—Ä–∏–º–µ—Ä:**
```python
result = owlwhisper.StopOwlWhisper()
if result == 0:
    print("‚úÖ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
```

#### `GenerateNewKeyPair() -> str*`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –ø–∞—Ä—É libp2p –∫–ª—é—á–µ–π Ed25519.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Base64-–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—É—é JSON-—Å—Ç—Ä–æ–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª—é—á–µ
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "private_key": "base64_encoded_key_bytes",
  "peer_id": "12D3KooW...",
  "key_type": "Ed25519",
  "key_length": 68
}
```
- **–ü—Ä–∏–º–µ—Ä:**
```python
import base64
```

#### `GenerateNewKeyBytes() -> str*`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—ã—Ä—ã–µ –±–∞–π—Ç—ã libp2p –∫–ª—é—á–∞ Ed25519 –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –°—ã—Ä—ã–µ –±–∞–π—Ç—ã –∫–ª—é—á–∞ –≤ libp2p —Ñ–æ—Ä–º–∞—Ç–µ
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –±–∞–π—Ç—ã –∫–ª—é—á–∞ –±–µ–∑ JSON –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- **üìè –†–∞–∑–º–µ—Ä:** –û–±—ã—á–Ω–æ 68 –±–∞–π—Ç –¥–ª—è Ed25519 –∫–ª—é—á–µ–π
- **–ü—Ä–∏–º–µ—Ä:**
```python
# –ü–æ–ª—É—á–∞–µ–º —Å—ã—Ä—ã–µ –±–∞–π—Ç—ã –∫–ª—é—á–∞
key_bytes = owlwhisper.GenerateNewKeyBytes()
if key_bytes:
    raw_key = ctypes.string_at(key_bytes)
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º —Å —Å—ã—Ä—ã–º–∏ –±–∞–π—Ç–∞–º–∏
    result = owlwhisper.StartOwlWhisperWithKey(raw_key, len(raw_key))
    
    # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(key_bytes)
```
import json

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –ø–∞—Ä—É –∫–ª—é—á–µ–π
key_data = owlwhisper.GenerateNewKeyPair()
if key_data:
    # –î–µ–∫–æ–¥–∏—Ä—É–µ–º base64
    json_str = ctypes.string_at(key_data).decode()
    key_info = json.loads(json_str)
    
    print(f"–ù–æ–≤—ã–π Peer ID: {key_info['peer_id']}")
    print(f"–¢–∏–ø –∫–ª—é—á–∞: {key_info['key_type']}")
    print(f"–î–ª–∏–Ω–∞ –∫–ª—é—á–∞: {key_info['key_length']} –±–∞–π—Ç")
    
    # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    private_key = base64.b64decode(key_info['private_key'])
    
    # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(key_data)
    
    # –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á –¥–ª—è –∑–∞–ø—É—Å–∫–∞
    result = owlwhisper.StartOwlWhisperWithKey(private_key, len(private_key))
else:
    print("‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π")
```

### üí¨ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

#### `SendMessage(text: str) -> int`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –ø–∏—Ä–∞–º (broadcast).
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `text` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `0` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, `-1` –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **–ü—Ä–∏–º–µ—Ä:**
```python
message = "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!".encode('utf-8')
result = owlwhisper.SendMessage(message)
```

#### `SendMessageToPeer(peer_id: str, text: str) -> int`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–∏—Ä—É.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** 
  - `peer_id` - Peer ID –ø–æ–ª—É—á–∞—Ç–µ–ª—è
  - `text` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `0` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, `-1` –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **–ü—Ä–∏–º–µ—Ä:**
```python
peer_id = "12D3KooW...".encode('utf-8')
message = "–ü—Ä–∏–≤–µ—Ç!".encode('utf-8')
result = owlwhisper.SendMessageToPeer(peer_id, message)
```

### üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–∏

#### `GetMyPeerID() -> str*`
–ü–æ–ª—É—á–∞–µ—Ç Peer ID —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** C-—Å—Ç—Ä–æ–∫—É —Å Peer ID
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä:**
```python
peer_id = owlwhisper.GetMyPeerID()
my_id = ctypes.string_at(peer_id).decode()
print(f"–ú–æ–π ID: {my_id}")
owlwhisper.FreeString(peer_id)  # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
```

#### `GetConnectedPeers() -> str*`
–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–º–∞—Å—Å–∏–≤ —Å Peer ID'–∞–º–∏
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **üí° –ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ —Å `GetPeers()` –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

peers_data = owlwhisper.GetConnectedPeers()
peers_json = ctypes.string_at(peers_data).decode()
peers = json.loads(peers_json)
print(f"–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –ø–∏—Ä–æ–≤: {len(peers)}")
for peer in peers:
    print(f"  - {peer}")
owlwhisper.FreeString(peers_data)  # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
```

#### `GetConnectionStatus() -> str*`
–ü–æ–ª—É—á–∞–µ—Ç –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å—Ç–∞—Ç—É—Å–µ
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

status_data = owlwhisper.GetConnectionStatus()
status_json = ctypes.string_at(status_data).decode()
status = json.loads(status_json)
print(f"–ü–æ–¥–∫–ª—é—á–µ–Ω: {status['connected']}")
print(f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏—Ä–æ–≤: {status['peers']}")
print(f"–ú–æ–π ID: {status['my_id']}")
owlwhisper.FreeString(status_data)  # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
```

### üë§ –ü—Ä–æ—Ñ–∏–ª–∏ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### `GetMyProfile() -> str*`
–ü–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ñ–∏–ª–µ
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

profile_data = owlwhisper.GetMyProfile()
profile_json = ctypes.string_at(profile_data).decode()
profile = json.loads(profile_json)
print(f"–ù–∏–∫–Ω–µ–π–º: {profile['nickname']}")
print(f"–î–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä: {profile['discriminator']}")
print(f"–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è: {profile['display_name']}")
owlwhisper.FreeString(profile_data)  # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
```

#### `UpdateMyProfile(nickname: str) -> int`
–û–±–Ω–æ–≤–ª—è–µ—Ç –Ω–∏–∫–Ω–µ–π–º —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `nickname` - –Ω–æ–≤—ã–π –Ω–∏–∫–Ω–µ–π–º
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `0` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, `-1` –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **–ü—Ä–∏–º–µ—Ä:**
```python
nickname = "–ú–æ–π–ù–∏–∫".encode('utf-8')
result = owlwhisper.UpdateMyProfile(nickname)
if result == 0:
    print("‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω")
```

#### `GetPeerProfile(peer_id: str) -> str*`
–ü–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `peer_id` - Peer ID –ø–∏—Ä–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ñ–∏–ª–µ –ø–∏—Ä–∞
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

peer_id = "12D3KooW...".encode('utf-8')
profile_data = owlwhisper.GetPeerProfile(peer_id)
profile_json = ctypes.string_at(profile_data).decode()
profile = json.loads(profile_json)
print(f"–ü–∏—Ä: {profile['nickname']}{profile['discriminator']}")
owlwhisper.FreeString(profile_data)  # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
```

### üîó –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏

#### `ConnectToPeer(peer_id: str) -> int`
–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø–∏—Ä—É.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `peer_id` - Peer ID –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `0` –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, `-1` –ø—Ä–∏ –æ—à–∏–±–∫–µ
- **–ü—Ä–∏–º–µ—Ä:**
```python
peer_id = "12D3KooW...".encode('utf-8')
result = owlwhisper.ConnectToPeer(peer_id)
if result == 0:
    print("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ")
```

### üìä –°–µ—Ç–µ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### `GetNetworkStats() -> str*`
–ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Ç–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–æ–±—ä–µ–∫—Ç —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–µ—Ç–∏
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

stats_data = owlwhisper.GetNetworkStats()
stats_json = ctypes.string_at(stats_data).decode()
stats = json.loads(stats_json)
print(f"–°—Ç–∞—Ç—É—Å: {stats['status']}")
print(f"–í—Å–µ–≥–æ –ø–∏—Ä–æ–≤: {stats['total_peers']}")
print(f"–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤: {stats['connected_peers']}")
print(f"–í—Å–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: {stats['total_connections']}")
print(f"–ü—Ä–æ—Ç–æ–∫–æ–ª—ã: {stats['protocols']}")
owlwhisper.FreeString(stats_data)
```

#### `GetConnectionQuality(peer_id: str) -> str*`
–ü–æ–ª—É—á–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–∏—Ä–æ–º.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `peer_id` - Peer ID –ø–∏—Ä–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–∞—á–µ—Å—Ç–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

peer_id = "12D3KooW...".encode('utf-8')
quality_data = owlwhisper.GetConnectionQuality(peer_id)
quality_json = ctypes.string_at(quality_data).decode()
quality = json.loads(quality_json)
print(f"–°—Ç–∞—Ç—É—Å: {quality['status']}")
print(f"–°–æ–µ–¥–∏–Ω–µ–Ω–∏–π: {quality['total_connections']}")
print(f"–°—Ç—Ä–∏–º–æ–≤: {quality['total_streams']}")
print(f"–ü—Ä–æ—Ç–æ–∫–æ–ª—ã: {quality['protocols']}")
owlwhisper.FreeString(quality_data)
```

### üîç –ü–æ–∏—Å–∫ –∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∏—Ä–æ–≤

#### `FindPeer(peer_id: str) -> str*`
–ò—â–µ—Ç –ø–∏—Ä–∞ –≤ —Å–µ—Ç–∏ –ø–æ PeerID.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `peer_id` - Peer ID –¥–ª—è –ø–æ–∏—Å–∫–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º –ø–∏—Ä–µ
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–∫–∞ –∏—â–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

peer_id = "12D3KooW...".encode('utf-8')
peer_data = owlwhisper.FindPeer(peer_id)
if peer_data:
    peer_json = ctypes.string_at(peer_data).decode()
    peer_info = json.loads(peer_json)
    print(f"–ù–∞–π–¥–µ–Ω –ø–∏—Ä: {peer_info['id']}")
    print(f"–ê–¥—Ä–µ—Å–∞: {peer_info['addrs']}")
    owlwhisper.FreeString(peer_data)
```

#### `FindPeerByNickname(nickname: str) -> str*`
–ò—â–µ—Ç –ø–∏—Ä–∞ –ø–æ –Ω–∏–∫–Ω–µ–π–º—É –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `nickname` - –Ω–∏–∫–Ω–µ–π–º –¥–ª—è –ø–æ–∏—Å–∫–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ñ–∏–ª–µ –ø–∏—Ä–∞
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–≥–ª—É—à–∫—É (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- **–ü—Ä–∏–º–µ—Ä:**
```python
import json

nickname = "–î—Ä—É–≥".encode('utf-8')
profile_data = owlwhisper.FindPeerByNickname(nickname)
if profile_data:
    profile_json = ctypes.string_at(profile_data).decode()
    profile = json.loads(profile_json)
    print(f"–ù–∞–π–¥–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å: {profile['nickname']}")
    owlwhisper.FreeString(profile_data)
```

### üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π

#### `GenerateNewKeyPair() -> str*`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –ø–∞—Ä—É libp2p –∫–ª—é—á–µ–π Ed25519.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** Base64-–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—É—é JSON-—Å—Ç—Ä–æ–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª—é—á–µ
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "private_key": "base64_encoded_key_bytes",
  "peer_id": "12D3KooW...",
  "key_type": "Ed25519",
  "key_length": 68
}
```
- **–ü—Ä–∏–º–µ—Ä:**
```python
import base64
import json

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –ø–∞—Ä—É –∫–ª—é—á–µ–π
key_data = owlwhisper.GenerateNewKeyPair()
if key_data:
    # –î–µ–∫–æ–¥–∏—Ä—É–µ–º base64
    json_str = ctypes.string_at(key_data).decode()
    key_info = json.loads(json_str)
    
    print(f"–ù–æ–≤—ã–π Peer ID: {key_info['peer_id']}")
    print(f"–¢–∏–ø –∫–ª—é—á–∞: {key_info['key_type']}")
    print(f"–î–ª–∏–Ω–∞ –∫–ª—é—á–∞: {key_info['key_length']} –±–∞–π—Ç")
    
    # –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    private_key = base64.b64decode(key_info['private_key'])
    
    # –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(key_data)
    
    # –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á –¥–ª—è –∑–∞–ø—É—Å–∫–∞
    result = owlwhisper.StartOwlWhisperWithKey(private_key, len(private_key))
else:
    print("‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π")
```

### üìú –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

#### `GetChatHistory(peer_id: str) -> str*`
–ü–æ–ª—É—á–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–∏—Ä–æ–º.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `peer_id` - Peer ID —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–º–∞—Å—Å–∏–≤ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### `GetChatHistoryLimit(peer_id: str, limit: int) -> str*`
–ü–æ–ª—É—á–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** 
  - `peer_id` - Peer ID —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
  - `limit` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** JSON-–º–∞—Å—Å–∏–≤ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤—ã–∑–≤–∞—Ç—å `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üßπ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

#### `FreeString(str_ptr: str*) -> void`
–û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ø–∞–º—è—Ç—å, –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –¥–ª—è —Å—Ç—Ä–æ–∫–∏.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `str_ptr` - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–æ–∫—É
- **‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û:** –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π
- **–ü—Ä–∏–º–µ—Ä:**
```python
# –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ
data = owlwhisper.GetMyPeerID()

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ
print(ctypes.string_at(data).decode())

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
owlwhisper.FreeString(data)
```

---

## üîß –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### C —Ç–∏–ø—ã
```c
typedef int C.int;
typedef char* C.char;
```

### Python —Ç–∏–ø—ã
```python
# –î–ª—è —Å—Ç—Ä–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ bytes
message = "–¢–µ–∫—Å—Ç".encode('utf-8')

# –î–ª—è —á–∏—Å–µ–ª –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ int
limit = 100
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä Python –∫–ª–∏–µ–Ω—Ç–∞

```python
import ctypes
import json
import time

# –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É
owlwhisper = ctypes.CDLL("./dist/libowlwhisper.so")

def main():
    try:
        # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        # owlwhisper.SetLogLevel(0)  # –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏
        # owlwhisper.SetLogOutput(2, "./logs")  # –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º
        print("üöÄ –ó–∞–ø—É—Å–∫ Owl Whisper...")
        result = owlwhisper.StartOwlWhisper()
        if result != 0:
            print("‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞")
            return
        
        print("‚úÖ Owl Whisper –∑–∞–ø—É—â–µ–Ω")
        
        # –ñ–¥–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        time.sleep(3)
        
        # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å
        status_data = owlwhisper.GetConnectionStatus()
        status_json = ctypes.string_at(status_data).decode()
        status = json.loads(status_json)
        owlwhisper.FreeString(status_data)
        
        print(f"üåê –°—Ç–∞—Ç—É—Å: {status}")
        
        # –ü–æ–ª—É—á–∞–µ–º –ø–∏—Ä–æ–≤
        peers_data = owlwhisper.GetConnectedPeers()
        peers_json = ctypes.string_at(peers_data).decode()
        peers = json.loads(peers_json)
        owlwhisper.FreeString(peers_data)
        
        print(f"üë• –ü–∏—Ä—ã: {peers}")
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        if len(peers) > 0:
            message = "–ü—Ä–∏–≤–µ—Ç –æ—Ç Python!".encode('utf-8')
            result = owlwhisper.SendMessage(message)
            if result == 0:
                print("‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
        
        # –ñ–¥–µ–º
        time.sleep(2)
        
        # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
        print("üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞...")
        owlwhisper.StopOwlWhisper()
        print("‚úÖ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    main()
```

### Node.js –ø—Ä–∏–º–µ—Ä

```javascript
const ffi = require('ffi-napi');
const ref = require('ref-napi');

// –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É
const owlwhisper = ffi.Library('./dist/libowlwhisper', {
    'StartOwlWhisper': ['int', []],
    'StartOwlWhisperWithKey': ['int', ['string', 'int']],
    'StopOwlWhisper': ['int', []],
    'GenerateNewKeyPair': ['string', []],
    'SendMessage': ['int', ['string']],
    'GetMyPeerID': ['string', []],
    'GetConnectedPeers': ['string', []],
    'GetConnectionStatus': ['string', []],
    'FreeString': ['void', ['string']]
});

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const result = owlwhisper.StartOwlWhisper();
if (result === 0) {
    console.log('‚úÖ –ó–∞–ø—É—â–µ–Ω');
    
    const peerId = owlwhisper.GetMyPeerID();
    console.log('Peer ID:', peerId);
    owlwhisper.FreeString(peerId);
    
    owlwhisper.StopOwlWhisper();
}

// –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
console.log('üîë –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å...');
const keyData = owlwhisper.GenerateNewKeyPair();
if (keyData) {
    const keyInfo = JSON.parse(Buffer.from(keyData, 'base64').toString());
    console.log('–ù–æ–≤—ã–π Peer ID:', keyInfo.peer_id);
    console.log('–¢–∏–ø –∫–ª—é—á–∞:', keyInfo.key_type);
    
    // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(keyData);
    
    // –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á
    const privateKey = Buffer.from(keyInfo.private_key, 'base64');
    const startResult = owlwhisper.StartOwlWhisperWithKey(privateKey, privateKey.length);
    if (startResult === 0) {
        console.log('‚úÖ –ù–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∑–∞–ø—É—â–µ–Ω!');
        owlwhisper.StopOwlWhisper();
    }
}
```

## üîß **–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

### **SetLogLevel**
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `level` (int): –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - 0: SILENT - –ª–æ–≥–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
  - 1: ERROR - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
  - 2: WARN - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏
  - 3: INFO - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏
  - 4: DEBUG - –≤—Å–µ –ª–æ–≥–∏

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –æ—à–∏–±–∫–µ

### **SetLogOutput**
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—ã–≤–æ–¥ –ª–æ–≥–æ–≤.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `output` (int): –¢–∏–ø –≤—ã–≤–æ–¥–∞
  - 0: NONE - –ª–æ–≥–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
  - 1: CONSOLE - —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å
  - 2: FILE - —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª
  - 3: BOTH - –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Ñ–∞–π–ª
- `log_dir` (char*): –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤ (–¥–ª—è FILE –∏ BOTH)

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** 0 –ø—Ä–∏ —É—Å–ø–µ—Ö–µ, 1 –ø—Ä–∏ –æ—à–∏–±–∫–µ

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```python
# –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ –ª–æ–≥–∏
owlwhisper.SetLogLevel(0)

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
owlwhisper.SetLogLevel(1)

# –í—Å–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
owlwhisper.SetLogOutput(2, "./logs")

# –í—Å–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Ñ–∞–π–ª
owlwhisper.SetLogOutput(3, "./logs")
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### üîí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- **–í–°–ï–ì–î–ê** –≤—ã–∑—ã–≤–∞–π—Ç–µ `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫, –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π
- –ù–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `FreeString()` –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ —É—Ç–µ—á–∫–∞–º –ø–∞–º—è—Ç–∏
- –í Python –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `try/finally` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏

### üö´ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–∞ (`StartOwlWhisper`) –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –¥—Ä—É–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (`StopOwlWhisper`)
- Peer ID –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏ libp2p –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏

### üîÑ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø–∏—Ä–∞–º, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ) –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `GetConnectionStatus()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –†–µ–≥—É–ª—è—Ä–Ω–æ –≤—ã–∑—ã–≤–∞–π—Ç–µ `GetConnectedPeers()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–∏—Ä–æ–≤

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "Cannot open shared object file"
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export LD_LIBRARY_PATH=./dist:$LD_LIBRARY_PATH  # Linux
export DYLD_LIBRARY_PATH=./dist:$DYLD_LIBRARY_PATH  # macOS
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Segmentation fault"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç–µ `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤
- **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –¢–µ–ø–µ—Ä—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∏—Ä–æ–≤ –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (mDNS, DHT, TCP, QUIC)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–∏—Ä–æ–≤ (–æ–±—ã—á–Ω–æ 2-5 —Å–µ–∫—É–Ω–¥)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∞—à —É–∑–µ–ª —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ bootstrap —É–∑–ª–∞–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –∫–ª—é—á–∞–º–∏
- **–†–ï–®–ï–ù–ò–ï:** ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–´ –î–í–ï –§–£–ù–ö–¶–ò–ò** –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª—é—á–∞–º–∏
- **`GenerateNewKeyPair()`** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è UI)
- **`GenerateNewKeyBytes()`** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—ã—Ä—ã–µ –±–∞–π—Ç—ã –∫–ª—é—á–∞ (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö)
- **–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞ –≤ –≤–µ—Ä—Å–∏–∏ –æ—Ç 23 –∞–≤–≥—É—Å—Ç–∞ 2025

### –ü—Ä–æ–±–ª–µ–º–∞: "proto: cannot parse invalid wire-format data"
- **–†–ï–®–ï–ù–ò–ï:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `GenerateNewKeyPair()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª—é—á–µ–π –≤–º–µ—Å—Ç–æ `secrets.token_bytes(32)`
- **–ü—Ä–∏—á–∏–Ω–∞:** Go –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–∂–∏–¥–∞–µ—Ç –∫–ª—é—á–∏ –≤ libp2p —Ñ–æ—Ä–º–∞—Ç–µ, –∞ –Ω–µ —Å–ª—É—á–∞–π–Ω—ã–µ –±–∞–π—Ç—ã
- **–§–æ—Ä–º–∞—Ç:** Ed25519 –∫–ª—é—á–∏, —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `crypto.MarshalPrivateKey()`
- **–†–∞–∑–º–µ—Ä:** –û–±—ã—á–Ω–æ 68 –±–∞–π—Ç –¥–ª—è Ed25519 –∫–ª—é—á–µ–π

### –ü—Ä–æ–±–ª–µ–º–∞: "panic: assignment to entry in nil map"
- **–†–ï–®–ï–ù–ò–ï:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - —Ç–µ–ø–µ—Ä—å map `peers` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- **–ü—Ä–∏—á–∏–Ω–∞:** Map –Ω–µ –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ `NewNodeWithKey`
- **–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞ –≤ –≤–µ—Ä—Å–∏–∏ –æ—Ç 23 –∞–≤–≥—É—Å—Ç–∞ 2025

### –ü—Ä–æ–±–ª–µ–º–∞: "Segmentation fault –ø—Ä–∏ –≤—ã–∑–æ–≤–µ StopOwlWhisper"
- **–†–ï–®–ï–ù–ò–ï:** ‚ö†Ô∏è **–ò–ó–í–ï–°–¢–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê** - –∏–∑–±–µ–≥–∞–π—Ç–µ –≤—ã–∑–æ–≤–∞ `StopOwlWhisper` –≤ —Ç–µ—Å—Ç–∞—Ö
- **–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω—ã–µ race conditions –ø—Ä–∏ graceful shutdown
- **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ `StopOwlWhisper` –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö
- **–°—Ç–∞—Ç—É—Å:** –ò—Å—Å–ª–µ–¥—É–µ—Ç—Å—è, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
dist/
‚îú‚îÄ‚îÄ libowlwhisper.so      # Linux shared library
‚îú‚îÄ‚îÄ owlwhisper.dll        # Windows shared library  
‚îú‚îÄ‚îÄ libowlwhisper.dylib   # macOS shared library
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ñ–∞–π–ª–∞–º

examples/
‚îî‚îÄ‚îÄ python_client.py      # –ü—Ä–∏–º–µ—Ä Python –∫–ª–∏–µ–Ω—Ç–∞

internal/core/
‚îú‚îÄ‚îÄ c_wrapper.go          # C –æ–±–µ—Ä—Ç–∫–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
‚îî‚îÄ‚îÄ owlwhisper.h          # C –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª
```

---

## üîó –°—Å—ã–ª–∫–∏

- **libp2p:** https://libp2p.io/
- **Go CGo:** https://golang.org/cmd/cgo/
- **Python ctypes:** https://docs.python.org/3/library/ctypes.html
- **Node.js ffi-napi:** https://github.com/node-ffi-napi/node-ffi-napi

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Go core (–≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç–µ `FreeString()` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–π
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–∏—Ä–æ–≤

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 23 –∞–≤–≥—É—Å—Ç–∞ 2025 (–≠—Ç–∞–ø 1 –∑–∞–≤–µ—Ä—à–µ–Ω: –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ—Ç–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω GetPeers, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏)