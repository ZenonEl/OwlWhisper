# üîó **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏**

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 23 –∞–≤–≥—É—Å—Ç–∞ 2025

–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—â–∏—â–µ–Ω–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –∏ –ª–∏–º–∏—Ç–∞–º–∏ —Å–µ—Ç–∏.

## üìã **–§—É–Ω–∫—Ü–∏–∏**

### **`AddProtectedPeer(peerID)`**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª—è–µ—Ç –ø–∏—Ä–∞ –≤ —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```c
int AddProtectedPeer(char* peerID);
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `peerID` (char*) - Peer ID –ø–∏—Ä–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `0` - —É—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
- `-1` - –æ—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```python
import ctypes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
owlwhisper.AddProtectedPeer.restype = ctypes.c_int

# –î–æ–±–∞–≤–ª—è–µ–º –ø–∏—Ä–∞ –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
peer_id = "12D3KooW...".encode('utf-8')
result = owlwhisper.AddProtectedPeer(peer_id)
if result == 0:
    print("‚úÖ –ü–∏—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è")
else:
    print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –ø–∏—Ä–∞ –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ")
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏:**
1. –ü–∏—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
2. ConnectionManager –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
3. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–æ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
4. –ü—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**
- ‚ö†Ô∏è **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –ø–∏—Ä—ã –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- üí° **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** - –¥—Ä—É–∑—å—è, —Å–µ—Ä–≤–µ—Ä—ã
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
- üìç **–õ–∏–º–∏—Ç –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** - –æ–±—ã—á–Ω–æ 10-20 –ø–∏—Ä–æ–≤

---

### **`RemoveProtectedPeer(peerID)`**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª—è–µ—Ç –ø–∏—Ä–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```c
int RemoveProtectedPeer(char* peerID);
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `peerID` (char*) - Peer ID –ø–∏—Ä–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `0` - —É—Å–ø–µ—à–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
- `-1` - –æ—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```python
import ctypes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
owlwhisper.RemoveProtectedPeer.restype = ctypes.c_int

# –£–¥–∞–ª—è–µ–º –ø–∏—Ä–∞ –∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
peer_id = "12D3KooW...".encode('utf-8')
result = owlwhisper.RemoveProtectedPeer(peer_id)
if result == 0:
    print("‚úÖ –ü–∏—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π")
else:
    print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å –ø–∏—Ä–∞ –∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö")
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:**
1. –ü–∏—Ä —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
2. –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã—Ç–æ
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è
4. –ü–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ–±—ã—á–Ω—ã–º (–Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω—ã–º)

**–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**
- ‚ö†Ô∏è **–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞—Ç—å—Å—è** –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
- üí° **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –≤–∞–∂–Ω–æ—Å—Ç—å—é —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- üîÑ **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- üìç **–ü–∏—Ä –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–µ—Ç–∏** - —Ç–æ–ª—å–∫–æ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –∑–∞—â–∏—Ç—ã

---

### **`GetProtectedPeers()`**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```c
char* GetProtectedPeers();
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –ù–µ—Ç

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `char*` - JSON —Å—Ç—Ä–æ–∫–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç `FreeString()`)
- `NULL` - –æ—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```json
[
  {
    "id": "12D3KooW...",
    "addrs": ["/ip4/192.168.1.100/tcp/1234"],
    "protocols": ["/owlwhisper/1.0.0"],
    "connection_quality": "excellent",
    "protected_since": 1755969188
  },
  {
    "id": "12D3KooW...",
    "addrs": ["/ip6/::1/tcp/1234"],
    "protocols": ["/owlwhisper/1.0.0"],
    "connection_quality": "good",
    "protected_since": 1755969189
  }
]
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```python
import ctypes
import json

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
owlwhisper.GetProtectedPeers.restype = ctypes.c_char_p

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤
protected_peers_ptr = owlwhisper.GetProtectedPeers()
if protected_peers_ptr:
    protected_peers_json = ctypes.string_at(protected_peers_ptr).decode()
    protected_peers = json.loads(protected_peers_json)
    
    print(f"üõ°Ô∏è –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –ø–∏—Ä—ã: {len(protected_peers)}")
    for peer in protected_peers:
        print(f"   - {peer['id']} ({peer['connection_quality']})")
        print(f"     –ó–∞—â–∏—â–µ–Ω —Å: {peer['protected_since']}")
    
    # –í–ê–ñ–ù–û: –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø–∞–º—è—Ç—å
    owlwhisper.FreeString(protected_peers_ptr)
else:
    print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤")
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:**
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∏—Ä–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
3. –í–∫–ª—é—á–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è JSON –º–∞—Å—Å–∏–≤ —Å –¥–∞–Ω–Ω—ã–º–∏

**–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**
- ‚ö†Ô∏è **–í–°–ï–ì–î–ê –≤—ã–∑—ã–≤–∞—Ç—å `FreeString()`** –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- üí° **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** –≤–∞–∂–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- üîÑ **–°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏
- üìä **–í–∫–ª—é—á–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** –æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö

## üîÑ **–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π:**

```python
def manage_friends_list():
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π –∫–∞–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤"""
    try:
        # –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –±–∞–∑—ã)
        friends = ["12D3KooW...", "12D3KooW...", "12D3KooW..."]
        
        print("üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –¥—Ä—É–∑–µ–π:")
        
        # –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ—Ö –¥—Ä—É–∑–µ–π –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ
        for friend_id in friends:
            peer_id = friend_id.encode('utf-8')
            result = owlwhisper.AddProtectedPeer(peer_id)
            
            if result == 0:
                print(f"‚úÖ {friend_id} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ")
            else:
                print(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å {friend_id}")
        
        # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö
        protected_peers_ptr = owlwhisper.GetProtectedPeers()
        if protected_peers_ptr:
            protected_peers_json = ctypes.string_at(protected_peers_ptr).decode()
            protected_peers = json.loads(protected_peers_json)
            owlwhisper.FreeString(protected_peers_ptr)
            
            print(f"üõ°Ô∏è –í—Å–µ–≥–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤: {len(protected_peers)}")
            
        return True
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–∑—å—è–º–∏: {e}")
        return False

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
manage_friends_list()
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–∂–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏:**

```python
def auto_manage_important_connections():
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–∂–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏"""
    try:
        # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤
        connected_peers_ptr = owlwhisper.GetConnectedPeers()
        if connected_peers_ptr:
            connected_peers_json = ctypes.string_at(connected_peers_ptr).decode()
            connected_peers = json.loads(connected_peers_json)
            owlwhisper.FreeString(connected_peers_ptr)
            
            # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤
            protected_peers_ptr = owlwhisper.GetProtectedPeers()
            if protected_peers_ptr:
                protected_peers_json = ctypes.string_at(protected_peers_ptr).decode()
                protected_peers = json.loads(protected_peers_json)
                owlwhisper.FreeString(protected_peers_ptr)
                
                protected_ids = {peer['id'] for peer in protected_peers}
                
                print("üîç –ê–Ω–∞–ª–∏–∑ –≤–∞–∂–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:")
                
                # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
                for peer in connected_peers:
                    peer_id = peer['id']
                    quality = peer.get('connection_quality', 'unknown')
                    
                    if quality in ['excellent', 'good'] and peer_id not in protected_ids:
                        print(f"üí° {peer_id} –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ - –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ")
                        
                        # –î–æ–±–∞–≤–ª—è–µ–º –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ
                        peer_id_bytes = peer_id.encode('utf-8')
                        result = owlwhisper.AddProtectedPeer(peer_id_bytes)
                        
                        if result == 0:
                            print(f"‚úÖ {peer_id} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ")
                        else:
                            print(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å {peer_id}")
                    
                    elif quality in ['poor', 'bad'] and peer_id in protected_ids:
                        print(f"‚ö†Ô∏è {peer_id} –∏–º–µ–µ—Ç –ø–ª–æ—Ö–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ - —É–±–∏—Ä–∞–µ–º –∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö")
                        
                        # –£–±–∏—Ä–∞–µ–º –∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö
                        peer_id_bytes = peer_id.encode('utf-8')
                        result = owlwhisper.RemoveProtectedPeer(peer_id_bytes)
                        
                        if result == 0:
                            print(f"‚úÖ {peer_id} —É–±—Ä–∞–Ω –∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö")
                        else:
                            print(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É–±—Ä–∞—Ç—å {peer_id}")
                
                return True
            else:
                print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤")
                return False
        else:
            print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤")
            return False
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: {e}")
        return False

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
auto_manage_important_connections()
```

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:**

```python
def monitor_protected_connections():
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π"""
    try:
        # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤
        protected_peers_ptr = owlwhisper.GetProtectedPeers()
        if protected_peers_ptr:
            protected_peers_json = ctypes.string_at(protected_peers_ptr).decode()
            protected_peers = json.loads(protected_peers_json)
            owlwhisper.FreeString(protected_peers_ptr)
            
            print(f"üõ°Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:")
            print(f"   –í—Å–µ–≥–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö: {len(protected_peers)}")
            
            # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—á–µ—Å—Ç–≤–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
            quality_stats = {}
            for peer in protected_peers:
                quality = peer.get('connection_quality', 'unknown')
                quality_stats[quality] = quality_stats.get(quality, 0) + 1
            
            print("üìä –ö–∞—á–µ—Å—Ç–≤–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:")
            for quality, count in quality_stats.items():
                print(f"   {quality}: {count}")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ä–µ–º—è –∑–∞—â–∏—Ç—ã
            current_time = int(time.time())
            for peer in protected_peers:
                protected_since = peer.get('protected_since', 0)
                protection_duration = current_time - protected_since
                
                if protection_duration > 3600:  # –ë–æ–ª–µ–µ —á–∞—Å–∞
                    print(f"‚è∞ {peer['id']} –∑–∞—â–∏—â–µ–Ω {protection_duration//3600} —á–∞—Å–æ–≤")
            
            return len(protected_peers), quality_stats
            
        else:
            print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤")
            return 0, {}
            
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: {e}")
        return 0, {}

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
protected_count, quality_stats = monitor_protected_connections()
print(f"–í—Å–µ–≥–æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π: {protected_count}")
```

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏:**

```python
def manage_server_connections():
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞–º–∏"""
    try:
        # –°–ø–∏—Å–æ–∫ –≤–∞–∂–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
        servers = [
            {"id": "12D3KooW...", "name": "Main Server", "type": "core"},
            {"id": "12D3KooW...", "name": "Backup Server", "type": "backup"},
            {"id": "12D3KooW...", "name": "File Server", "type": "storage"}
        ]
        
        print("üñ•Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏:")
        
        # –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ
        for server in servers:
            peer_id = server['id'].encode('utf-8')
            result = owlwhisper.AddProtectedPeer(peer_id)
            
            if result == 0:
                print(f"‚úÖ {server['name']} ({server['type']}) –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ")
            else:
                print(f"‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å {server['name']}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
        protected_peers_ptr = owlwhisper.GetProtectedPeers()
        if protected_peers_ptr:
            protected_peers_json = ctypes.string_at(protected_peers_ptr).decode()
            protected_peers = json.loads(protected_peers_json)
            owlwhisper.FreeString(protected_peers_ptr)
            
            print(f"üõ°Ô∏è –°–µ—Ä–≤–µ—Ä–æ–≤ –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö: {len(protected_peers)}")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
            for peer in protected_peers:
                if peer['id'] in [s['id'] for s in servers]:
                    server_info = next(s for s in servers if s['id'] == peer['id'])
                    quality = peer.get('connection_quality', 'unknown')
                    print(f"   {server_info['name']}: {quality}")
        
        return True
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞–º–∏: {e}")
        return False

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
manage_server_connections()
```

## ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è**

### **–õ–∏–º–∏—Ç—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:**
- **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:** –æ–±—ã—á–Ω–æ 10-20 –ø–∏—Ä–æ–≤
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:** –æ–±—ã—á–Ω–æ 5-10 –ø–∏—Ä–æ–≤
- **–û–±—â–∏–π –ª–∏–º–∏—Ç:** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ libp2p
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - Core —Å–∞–º –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ª–∏—à–Ω–∏–µ

### **–ö–∞—á–µ—Å—Ç–≤–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:**
- **excellent** - –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ
- **good** - —Ö–æ—Ä–æ—à–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ
- **poor** - –ø–ª–æ—Ö–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ
- **bad** - –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —á–∞—Å—Ç–æ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –ø–∏—Ä—ã** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è
- **–û–±—ã—á–Ω—ã–µ –ø–∏—Ä—ã** –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç—ã –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **ConnectionManager** —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏–º–∏—Ç–∞–º–∏
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **`AddProtectedPeer()`** - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π, –ª–æ–∫–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
- **`RemoveProtectedPeer()`** - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π, –ª–æ–∫–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
- **`GetProtectedPeers()`** - –±—ã—Å—Ç—Ä—ã–π, –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –ø–∏—Ä—ã** –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞
- **Graceful degradation** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å —Å–µ—Ç—å—é

### **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- **–¢–æ–ª—å–∫–æ Peer ID** - –Ω–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –∞–¥—Ä–µ—Å—É
- **–ù–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏** - –≤—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–∞–≤–Ω—ã
- **–ù–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏** - –ø—Ä–æ—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
- **–ù–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** - —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å –∑–∞—â–∏—Ç—ã

## üîó **–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**

- [–ü–æ–∏—Å–∫ –ø–∏—Ä–æ–≤](../functions/peer-discovery.md) - –ø–æ–∏—Å–∫ –ø–∏—Ä–æ–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ
- [–°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π](../functions/events-system.md) - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏/–æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–∏](../functions/network-monitoring.md) - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- [–£—Ç–∏–ª–∏—Ç—ã](../functions/utilities.md) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –¥–ª—è —Å—Ç—Ä–æ–∫

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 23 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ê–≤—Ç–æ—Ä:** Core Development Team 