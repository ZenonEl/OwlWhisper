# üì° **–°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π**

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 23 –∞–≤–≥—É—Å—Ç–∞ 2025

–°–∏—Å—Ç–µ–º–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏ –æ—Ç Core –∫ –∫–ª–∏–µ–Ω—Ç—É.

## üéØ **–û–±–∑–æ—Ä**

**–°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π** - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π Core –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —É–≤–µ–¥–æ–º–ª—è—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –æ –≤–∞–∂–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö. –≠—Ç–æ **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Å–≤—è–∑–∏** –æ—Ç Core –∫ –∫–ª–∏–µ–Ω—Ç—É –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π.

> **–í–∞–∂–Ω–æ:** `GetNextEvent()` - —ç—Ç–æ –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ô —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è –í–°–ï–• —Å–æ–±—ã—Ç–∏–π –æ—Ç Core, –≤–∫–ª—é—á–∞—è –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ä–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å —Å–µ—Ç–∏.

### **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ë–ª–æ–∫–∏—Ä—É—é—â–∏–π –≤—ã–∑–æ–≤** - –∫–ª–∏–µ–Ω—Ç –∂–¥–µ—Ç —Å–æ–±—ã—Ç–∏—è, –Ω–µ —Ç—Ä–∞—Ç—è —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ polling
- **JSON —Ñ–æ—Ä–º–∞—Ç** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ª—é–±–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - Core –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –¥–ª—è –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤

## üìã **–§—É–Ω–∫—Ü–∏–∏**

### **`GetNextEvent()`**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ë–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏.

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞:**
```c
char* GetNextEvent();
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –ù–µ—Ç

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `char*` - JSON —Å—Ç—Ä–æ–∫–∞ —Å —Å–æ–±—ã—Ç–∏–µ–º (—Ç—Ä–µ–±—É–µ—Ç `FreeString()`)
- `NULL` - –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π –∏–ª–∏ –æ—à–∏–±–∫–∞

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```python
import ctypes
import json
import threading

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
owlwhisper.GetNextEvent.restype = ctypes.c_char_p

def event_listener():
    """–°–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ"""
    while True:
        try:
            event_ptr = owlwhisper.GetNextEvent()
            if event_ptr:
                event_json = ctypes.string_at(event_ptr).decode()
                owlwhisper.FreeString(event_ptr)
                
                event = json.loads(event_json)
                handle_event(event)
            else:
                # –ù–µ—Ç —Å–æ–±—ã—Ç–∏–π, –Ω–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞
                time.sleep(0.1)
                
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π: {e}")
            time.sleep(1)

def handle_event(event):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø–æ —Ç–∏–ø—É"""
    event_type = event['type']
    
    if event_type == 'PeerConnected':
        peer_id = event['payload']['peerID']
        print(f"üîó –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –ø–∏—Ä: {peer_id}")
        
    elif event_type == 'PeerDisconnected':
        peer_id = event['payload']['peerID']
        print(f"üîå –û—Ç–∫–ª—é—á–∏–ª—Å—è –ø–∏—Ä: {peer_id}")
        
    elif event_type == 'NetworkStatus':
        status = event['payload']['status']
        message = event['payload']['message']
        print(f"üåê –°—Ç–∞—Ç—É—Å —Å–µ—Ç–∏: {status} - {message}")

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
thread = threading.Thread(target=event_listener, daemon=True)
thread.start()

print("üöÄ –°–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π –∑–∞–ø—É—â–µ–Ω")
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ:**
1. –§—É–Ω–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
2. –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å—Ç—Ä–æ–∫—É
3. –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `NULL`
4. –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è

**–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**
- ‚ö†Ô∏è **–í–°–ï–ì–î–ê –≤—ã–∑—ã–≤–∞—Ç—å `FreeString()`** –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚ö†Ô∏è **–ë–ª–æ–∫–∏—Ä—É—é—â–∏–π –≤—ã–∑–æ–≤** - –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ UI
- üí° **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é** - Core —Å–∞–º –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è

## üì® **–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π**

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `GetNextEvent()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –í–°–ï —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π, –≤–∫–ª—é—á–∞—è –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ä–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å —Å–µ—Ç–∏.

### **1. NewMessage**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–æ–≤–æ–µ –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–∏—Ä–∞.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
    "type": "NewMessage",
    "payload": {
        "senderID": "12D3KooW...",
        "data": [1, 2, 3, 4, 5]
    },
    "timestamp": 1755969188
}
```

**–ü–æ–ª—è:**
- `senderID` - Peer ID –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- `data` - –º–∞—Å—Å–∏–≤ –±–∞–π—Ç —Å–æ–æ–±—â–µ–Ω–∏—è ([]byte –¥–∞–Ω–Ω—ã–µ)
- `timestamp` - Unix timestamp –ø–æ–ª—É—á–µ–Ω–∏—è

**–ö–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:**
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Ç–æ–∫–∞
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `handleStream` —Ñ—É–Ω–∫—Ü–∏–∏ Node

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```python
def handle_new_message(event):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    sender_id = event['payload']['senderID']
    data = event['payload']['data']
    timestamp = event['timestamp']
    
    print(f"üì® –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç {sender_id}")
    print(f"   –î–∞–Ω–Ω—ã–µ: {data}")
    print(f"   –í—Ä–µ–º—è: {timestamp}")
    
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ:
    # - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    # - –û–±–Ω–æ–≤–∏—Ç—å UI —á–∞—Ç–∞
    # - –£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    # - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (—Ç–µ–∫—Å—Ç, —Ñ–∞–π–ª—ã, JSON –∏ —Ç.–¥.)
```

---

### **2. PeerConnected**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∏—Ä–∞ –∫ —Å–µ—Ç–∏.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
    "type": "PeerConnected",
    "payload": {
        "peerID": "12D3KooW..."
    },
    "timestamp": 1755969189
}
```

**–ü–æ–ª—è:**
- `peerID` - Peer ID –ø–æ–¥–∫–ª—é—á–∏–≤—à–µ–≥–æ—Å—è –ø–∏—Ä–∞
- `timestamp` - Unix timestamp –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ö–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:**
- –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø–∏—Ä–æ–º
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `NetworkEventLogger.Connected`

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```python
def handle_peer_connected(event):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–∏—Ä–∞"""
    peer_id = event['payload']['peerID']
    timestamp = event['timestamp']
    
    print(f"üîó –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –ø–∏—Ä: {peer_id}")
    
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ:
    # - –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤ –≤ UI
    # - –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–µ
    # - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–æ–Ω–ª–∞–π–Ω" –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
    # - –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–º–µ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π —Å –Ω–æ–≤—ã–º –ø–∏—Ä–æ–º
```

---

### **3. PeerDisconnected**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–∏—Ä–∞ –æ—Ç —Å–µ—Ç–∏.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
    "type": "PeerDisconnected",
    "payload": {
        "peerID": "12D3KooW..."
    },
    "timestamp": 1755969190
}
```

**–ü–æ–ª—è:**
- `peerID` - Peer ID –æ—Ç–∫–ª—é—á–∏–≤—à–µ–≥–æ—Å—è –ø–∏—Ä–∞
- `timestamp` - Unix timestamp –æ—Ç–∫–ª—é—á–µ–Ω–∏—è

**–ö–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:**
- –ü—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø–∏—Ä–æ–º
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `NetworkEventLogger.Disconnected`

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```python
def handle_peer_disconnected(event):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–∏—Ä–∞"""
    peer_id = event['payload']['peerID']
    timestamp = event['timestamp']
    
    print(f"üîå –û—Ç–∫–ª—é—á–∏–ª—Å—è –ø–∏—Ä: {peer_id}")
    
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ:
    # - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–æ—Ñ–ª–∞–π–Ω" –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
    # - –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
    # - –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤ –≤ UI
    # - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```

---

### **4. NetworkStatus**

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
    "type": "NetworkStatus",
    "payload": {
        "status": "CONNECTING_TO_DHT",
        "message": "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ bootstrap-—É–∑–ª–∞–º..."
    },
    "timestamp": 1755969188
}
```

**–ü–æ–ª—è:**
- `status` - –∫–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏
- `message` - —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- `timestamp` - Unix timestamp –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã:**
- `CONNECTING_TO_DHT` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ bootstrap —É–∑–ª–∞–º
- `NETWORK_READY` - —Å–µ—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ
- `DHT_BOOTSTRAP_FAILED` - –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ bootstrap
- `FALLBACK_TO_CACHE` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∏—Ä–æ–≤

**–ö–æ–≥–¥–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:**
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è DHT discovery
- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏/–æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ –∫ bootstrap —É–∑–ª–∞–º
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏

**–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```python
def handle_network_status(event):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏"""
    status = event['payload']['status']
    message = event['payload']['message']
    timestamp = event['timestamp']
    
    print(f"üåê –°—Ç–∞—Ç—É—Å —Å–µ—Ç–∏: {status}")
    print(f"   –°–æ–æ–±—â–µ–Ω–∏–µ: {message}")
    
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ:
    # - –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ç–∏ –≤ UI
    # - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    # - –£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
    # - –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
```

## üîÑ **–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏:**

```python
def monitor_network_status():
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ç–∏ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è"""
    def event_handler(event):
        if event['type'] == 'NetworkStatus':
            status = event['payload']['status']
            message = event['payload']['message']
            
            if status == 'NETWORK_READY':
                print("‚úÖ –°–µ—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ")
                # –ü–æ–∫–∞–∑–∞—Ç—å –∑–µ–ª–µ–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ UI
            elif status == 'CONNECTING_TO_DHT':
                print("üîÑ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏...")
                # –ü–æ–∫–∞–∑–∞—Ç—å –∂–µ–ª—Ç—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ UI
            elif status == 'DHT_BOOTSTRAP_FAILED':
                print("‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é")
                # –ü–æ–∫–∞–∑–∞—Ç—å –∫—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ UI
    
    return event_handler
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∏—Ä–æ–≤:**

```python
def auto_update_peer_list():
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∏—Ä–æ–≤"""
    def event_handler(event):
        if event['type'] == 'PeerConnected':
            peer_id = event['payload']['peerID']
            # –î–æ–±–∞–≤–∏—Ç—å –ø–∏—Ä–∞ –≤ —Å–ø–∏—Å–æ–∫ –æ–Ω–ª–∞–π–Ω
            add_peer_to_online_list(peer_id)
            
        elif event['type'] == 'PeerDisconnected':
            peer_id = event['payload']['peerID']
            # –£–±—Ä–∞—Ç—å –ø–∏—Ä–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –æ–Ω–ª–∞–π–Ω
            remove_peer_from_online_list(peer_id)
    
    return event_handler
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:**

```python
def handle_incoming_messages():
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    def event_handler(event):
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
        # –°–º. NewMessage —Å–æ–±—ã—Ç–∏–µ –≤—ã—à–µ
        pass
    
    return event_handler
```

### **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:**

```python
def create_event_processor():
    """–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π"""
    def process_event(event):
        event_type = event['type']
        
        # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø–∞–º
        if event_type in ['PeerConnected', 'PeerDisconnected']:
            auto_update_peer_list()(event)
        elif event_type == 'NetworkStatus':
            monitor_network_status()(event)
        else:
            print(f"‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è: {event_type}")
    
    return process_event

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
event_processor = create_event_processor()

def event_listener():
    while True:
        event_ptr = owlwhisper.GetNextEvent()
        if event_ptr:
            event_json = ctypes.string_at(event_ptr).decode()
            owlwhisper.FreeString(event_ptr)
            
            event = json.loads(event_json)
            event_processor(event)
```

## ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è**

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏** - `GetNextEvent()` –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –æ—Ç Core
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - Core –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –¥–ª—è –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **–ë–ª–æ–∫–∏—Ä—É—é—â–∏–π API** - –∫–ª–∏–µ–Ω—Ç –∂–¥–µ—Ç —Å–æ–±—ã—Ç–∏—è, –Ω–µ —Ç—Ä–∞—Ç—è —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ polling
- **JSON —Ñ–æ—Ä–º–∞—Ç** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ª—é–±–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **–°–æ–±—ã—Ç–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- **–û—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π** - –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ—Ç–µ—Ä–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** - —Å—Ç–∞—Ä—ã–µ —Å–æ–±—ã—Ç–∏—è –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
- **–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤

### **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- **–¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful degradation –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- **–¢–æ–ª—å–∫–æ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–±—ã—Ç–∏—è** - –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ Core
- **–¢–æ–ª—å–∫–æ JSON —Ñ–æ—Ä–º–∞—Ç** - –Ω–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- **–¢–æ–ª—å–∫–æ —Å–µ—Ç–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è** - –Ω–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
- **–¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–ª—É—à–∞—Ç–µ–ª—å** - –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –º–æ–≥—É—Ç –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞ —Å–æ–±—ã—Ç–∏—è

## üîó **–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**

- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Core](../functions/core-management.md) - –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ Core –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- [–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏](../functions/messaging.md) - –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
- [–ü–æ–∏—Å–∫ –ø–∏—Ä–æ–≤](../functions/peer-discovery.md) - –ø–æ–∏—Å–∫ –ø–∏—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è
- [–£—Ç–∏–ª–∏—Ç—ã](../functions/utilities.md) - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –¥–ª—è —Å—Ç—Ä–æ–∫ —Å–æ–±—ã—Ç–∏–π

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 23 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–ê–≤—Ç–æ—Ä:** Core Development Team 